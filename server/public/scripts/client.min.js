var myApp=angular.module("myApp",[]);myApp.controller("OneController",["$scope","InfoService",function(a,b){a.searchMovie=b.searchMovie,a.movie=b.movie,b.getRequest()}]),myApp.controller("TwoController",["$scope","$http","InfoService",function(a,b,c){a.searchResult=c.searchResult,a.saveFavMovie=c.saveMovie,a.favorites=c.favorites.favMovies,c.getRequest()}]),myApp.factory("InfoService",["$http",function(a){var b={title:""},c={},d=[],e={favMovies:d},f={};return{movie:b,searchResult:c,favorites:e,favMovies:d,searchMovie:function(){searchMovie=b.title,a.get("http://www.omdbapi.com/?t="+searchMovie+"&y=&plot=full&r=json").then(function(a){c.response=a.data,b.title=""})},getRequest:function(){a.get("/movie").then(function(a){console.log("In db: ",a)})},saveMovie:function(){var b=angular.copy(c.response);d.push(b);for(var e=0;e<d.length;e++)f={title:d[e].Title,year:d[e].Year,actors:d[e].Actors,runtime:d[e].Runtime,plot:d[e].Plot};console.log(f),a.post("/movie",f).then(function(a){console.log("saved to db:",a),getRequest()})}}}]);